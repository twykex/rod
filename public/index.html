<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VoxLink</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Figtree:wght@300;400;500;600;700&family=Fira+Code:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="toast-w" id="toasts"></div>

<!-- â•â•â• ONBOARDING â•â•â• -->
<div id="onboarding">
  <div class="ob-rings"><div class="ob-ring"></div><div class="ob-ring"></div><div class="ob-ring"></div><div class="ob-ring"></div><div class="ob-ring"></div></div>
  <div class="ob-card">
    <div class="ob-brand">
      <div class="ob-logo">VoxLink</div>
      <div class="ob-tagline">Studio-grade voice</div>
    </div>
    <div class="ob-form">
      <div class="ob-field">
        <input class="ob-input" id="nameInput" type="text" placeholder="Choose a display name" maxlength="32" autofocus>
        <svg class="ob-field-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      </div>
      <button class="ob-btn" id="joinBtn">Start Talking</button>
    </div>
    <div class="ob-footnote">Opus Â· Up to 510 kbps Â· Peer-to-peer Â· E2E encrypted</div>
  </div>
</div>

<!-- â•â•â• APP â•â•â• -->
<div id="app" style="display:none">

  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sb-hd">
      <div class="sb-logo">VoxLink</div>
      <div class="sb-chips"><span class="sb-chip">v3</span><span class="sb-chip">Opus</span></div>
    </div>
    <div class="sb-body" id="roomList"><div class="sb-label">Rooms</div></div>
    <div class="sb-ft">
      <button class="btn-create" id="btnNewRoom">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
        <span>New Room</span>
      </button>
    </div>
  </div>

  <!-- Main -->
  <div class="main">
    <div class="top">
      <div class="top-left">
        <span class="top-icon" id="hdrIcon">ðŸŽ™</span>
        <div class="top-info">
          <div class="top-name" id="roomTitle">Select a room</div>
          <div class="top-sub" id="roomMeta">Pick a room to join voice</div>
        </div>
      </div>
      <div class="top-actions">
        <button class="ib" id="btnChat" title="Chat Â· C">ðŸ’¬<div class="ib-dot" id="chatBadge">0</div></button>
        <button class="ib" id="btnSettings" title="Settings Â· S">âš™</button>
      </div>
    </div>

    <div class="va">
      <div class="vm">
        <div class="vg" id="voiceGrid">
          <div class="es" id="emptyState">
            <div class="es-vis"><div class="es-bar"></div><div class="es-bar"></div><div class="es-bar"></div><div class="es-bar"></div><div class="es-bar"></div><div class="es-bar"></div><div class="es-bar"></div></div>
            <div class="es-title">Ready when you are</div>
            <div class="es-sub">Join a room to start a voice session</div>
          </div>
        </div>
        <div class="stats" id="statsBar">
          <div class="st"><div class="st-dot" id="stDot"></div><span id="stConn">Connected</span></div>
          <div class="st"><span class="st-k">TX</span>&nbsp;<span id="stTx">128k</span></div>
          <div class="st"><span class="st-k">Rate</span>&nbsp;<span id="stRate">48kHz</span></div>
          <div class="st"><span class="st-k">Ch</span>&nbsp;<span id="stCh">ST</span></div>
          <div class="st"><span class="st-k">RTT</span>&nbsp;<span id="stRtt">â€”</span></div>
          <div class="st"><span class="st-k">Jit</span>&nbsp;<span id="stJit">â€”</span></div>
          <div class="st"><span class="st-k">Loss</span>&nbsp;<span id="stLoss">0%</span></div>
          <div class="st"><span class="st-k">â†‘</span>&nbsp;<span id="stBwUp">â€”</span></div>
          <div class="st"><span class="st-k">â†“</span>&nbsp;<span id="stBwDn">â€”</span></div>
        </div>
      </div>

      <!-- Chat -->
      <div class="pnl" id="chatPanel">
        <div class="pnl-hd"><div class="pnl-title">Chat</div><button class="ib" id="btnCloseChat" style="width:28px;height:28px;font-size:11px">âœ•</button></div>
        <div class="chat-bd" id="chatBody"></div>
        <div class="chat-input-w"><input class="chat-inp" id="chatInput" placeholder="Messageâ€¦" maxlength="2000"></div>
      </div>
    </div>

    <!-- Bottom bar (floating glass) -->
    <div class="bottom" id="bottomBar">
      <div class="bm"><span class="bm-lbl">IN</span><div class="bm-track"><div class="bm-fill inp" id="inMeter"></div></div></div>
      <div class="cg">
        <button class="vb vb-mic" id="btnMic" title="Mute Â· M"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></svg></button>
        <button class="vb vb-deaf" id="btnDeaf" title="Deafen Â· D"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M3 18v-6a9 9 0 0 1 18 0v6"/><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3z"/><path d="M3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"/></svg></button>
      </div>
      <div class="csep"></div>
      <button class="vb vb-ptt" id="btnPtt" title="Push to Talk Â· Space">PTT</button>
      <div class="csep"></div>
      <button class="vb vb-dc" id="btnDc" title="Leave Â· Esc"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><path d="M16 17l5-5-5-5"/><path d="M21 12H9"/><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/></svg></button>
      <div class="bm"><span class="bm-lbl">OUT</span><div class="bm-track"><div class="bm-fill out" id="outMeter"></div></div></div>
    </div>
  </div>

  <!-- Settings panel -->
  <div class="pnl" id="settingsPanel">
    <div class="pnl-hd"><div class="pnl-title">Audio Engine</div><button class="ib" id="btnCloseSets" style="width:28px;height:28px;font-size:11px">âœ•</button></div>
    <div class="pnl-bd">
      <div class="ss"><div class="ss-t">Devices</div><div class="sr"><span class="sr-l">Input</span></div><select class="sel" id="selInputDev" style="width:100%;margin-bottom:10px"></select><div class="sr"><span class="sr-l">Output</span></div><select class="sel" id="selOutputDev" style="width:100%"></select></div>
      <div class="ss"><div class="ss-t">Encoding</div><div class="sr"><span class="sr-l">Send Bitrate</span><span class="sr-v" id="vBit">128 kbps</span></div><input type="range" class="sr-sl" id="sBit" min="6" max="510" value="128" step="2"><div class="sr" style="margin-top:2px"><span class="sr-l" style="font-size:10px;color:var(--t4)">6 kbps</span><span class="sr-l" style="font-size:10px;color:var(--t4)">510 kbps</span></div><div class="sr"><span class="sr-l">Sample Rate</span><select class="sel" id="selRate"><option value="8000">8 kHz</option><option value="12000">12 kHz</option><option value="16000">16 kHz</option><option value="24000">24 kHz</option><option value="48000" selected>48 kHz</option></select></div><div class="sr"><span class="sr-l">Channels</span><select class="sel" id="selCh"><option value="1">Mono</option><option value="2" selected>Stereo</option></select></div></div>
      <div class="ss"><div class="ss-t">Processing</div><div class="sr"><span class="sr-l">Echo Cancellation</span><div class="tg on" data-k="echoCancellation" id="tEcho"></div></div><div class="sr"><span class="sr-l">Noise Suppression</span><div class="tg on" data-k="noiseSuppression" id="tNoise"></div></div><div class="sr"><span class="sr-l">Auto Gain Control</span><div class="tg on" data-k="autoGainControl" id="tAGC"></div></div></div>
      <div class="ss"><div class="ss-t">Advanced</div><div class="sr"><span class="sr-l">Noise Gate</span><span class="sr-v" id="vGate">-50 dB</span></div><input type="range" class="sr-sl" id="sGate" min="-80" max="-10" value="-50"><div class="sr"><span class="sr-l">DTX</span><div class="tg" data-k="dtx" id="tDTX"></div></div><div class="sr"><span class="sr-l">FEC</span><div class="tg on" data-k="fec" id="tFEC"></div></div><div class="sr"><span class="sr-l">Expected Loss</span><span class="sr-v" id="vLoss">0%</span></div><input type="range" class="sr-sl" id="sLoss" min="0" max="30" value="0"><div class="sr"><span class="sr-l">Jitter Buffer</span><select class="sel" id="selJit"><option value="adaptive" selected>Adaptive</option><option value="fixed-low">Fixed Low</option><option value="fixed-medium">Fixed Med</option><option value="fixed-high">Fixed High</option></select></div></div>
      <div class="ss"><div class="ss-t">Presets</div><div class="pgrid"><button class="pbtn" onclick="applyPreset('voice')">Voice</button><button class="pbtn" onclick="applyPreset('music')">Music</button><button class="pbtn" onclick="applyPreset('lowbw')">Low BW</button><button class="pbtn" onclick="applyPreset('studio')">Studio</button><button class="pbtn" onclick="applyPreset('podcast')">Podcast</button></div></div>
      <div class="ss"><div class="ss-t">Shortcuts</div><div class="sr"><span class="sr-l">M</span><span class="sr-v" style="color:var(--t3)">Mute</span></div><div class="sr"><span class="sr-l">D</span><span class="sr-v" style="color:var(--t3)">Deafen</span></div><div class="sr"><span class="sr-l">Space</span><span class="sr-v" style="color:var(--t3)">Push to talk</span></div><div class="sr"><span class="sr-l">Esc</span><span class="sr-v" style="color:var(--t3)">Leave</span></div></div>
    </div>
  </div>
</div>

<!-- Create Room -->
<div class="mbg" id="modalNewRoom"><div class="mdl">
  <h3>Create a room</h3>
  <div class="mdl-row"><label>Name</label><input class="mi" id="nrName" placeholder="My room" maxlength="48"></div>
  <div class="mdl-row"><label>Description</label><input class="mi" id="nrDesc" placeholder="What's it for?" maxlength="200"></div>
  <div class="mdl-row"><label>Icon</label><select class="sel" id="nrIcon" style="width:100%"><option value="ðŸŽ™">ðŸŽ™ Mic</option><option value="ðŸ’¬">ðŸ’¬ Chat</option><option value="ðŸŽµ">ðŸŽµ Music</option><option value="ðŸŽ®">ðŸŽ® Gaming</option><option value="ðŸŽ›">ðŸŽ› Studio</option><option value="ðŸŽ§">ðŸŽ§ Phones</option><option value="â˜•">â˜• Chill</option><option value="ðŸ”’">ðŸ”’ Private</option></select></div>
  <div class="mdl-row"><label>Password (optional)</label><input class="mi" id="nrPw" type="password" placeholder="Leave blank for open"></div>
  <div class="mdl-row"><label>Capacity</label><input class="mi" id="nrCap" type="number" min="2" max="50" value="25"></div>
  <div class="mdl-ft"><button class="mb s" onclick="closeModals()">Cancel</button><button class="mb p" onclick="submitNewRoom()">Create</button></div>
</div></div>

<!-- Password -->
<div class="mbg" id="modalPw"><div class="mdl">
  <h3>ðŸ”’ Password required</h3>
  <div class="mdl-row"><label>Enter password</label><input class="mi" id="pwInput" type="password" placeholder="Room password"></div>
  <div class="mdl-ft"><button class="mb s" onclick="closeModals()">Cancel</button><button class="mb p" id="pwSubmit">Join</button></div>
</div></div>

<script src="js/app.js"></script>
</body>
</html>
